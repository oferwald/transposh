<?php

/*
  Plugin Name: Flags emoji
  Plugin URI: http://transposh.org/
  Description: Widget with emoji flags links
  Author: Team Transposh
  Version: 1.0
  Author URI: http://transposh.org/
  License: GPL (http://www.gnu.org/licenses/gpl.txt)
 */

/*
 * Transposh v%VERSION%
 * http://transposh.org/
 *
 * Copyright %YEAR%, Team Transposh
 * Licensed under the GPL Version 2 or higher.
 * http://transposh.org/license
 *
 * Date: %DATE%
 */

/**
 * This function allows the widget to tell the invoker if it needs to calculate different urls per language, here it is needed
 * @return boolean
 */
class tpw_flagsemoji extends transposh_base_widget {

    /**
     * Creates the list of flags
     * @global transposh_plugin $my_transposh_plugin
     * @param array $args - http://trac.transposh.org/wiki/WidgetWritingGuide#functiontp_widgets_doargs
     */
    static function tp_widget_do($args) {
        global $my_transposh_plugin;

// An array to hold all the countries
        $emoji_flags = [
// Now, all the country flags as emojis
            "ad" => "\u{1f1e6}\u{1f1e9}",
            "ae" => "\u{1f1e6}\u{1f1ea}",
            "af" => "\u{1f1e6}\u{1f1eb}",
            "ag" => "\u{1f1e6}\u{1f1ec}",
            "ai" => "\u{1f1e6}\u{1f1ee}",
            "al" => "\u{1f1e6}\u{1f1f1}",
            "am" => "\u{1f1e6}\u{1f1f2}",
            "ao" => "\u{1f1e6}\u{1f1f4}",
            "aq" => "\u{1f1e6}\u{1f1f6}",
            "ar" => "\u{1f1e6}\u{1f1f7}",
            "as" => "\u{1f1e6}\u{1f1f8}",
            "at" => "\u{1f1e6}\u{1f1f9}",
            "au" => "\u{1f1e6}\u{1f1fa}",
            "aw" => "\u{1f1e6}\u{1f1fc}",
            "ax" => "\u{1f1e6}\u{1f1fd}",
            "az" => "\u{1f1e6}\u{1f1ff}",
            "ba" => "\u{1f1e7}\u{1f1e6}",
            "bb" => "\u{1f1e7}\u{1f1e7}",
            "bd" => "\u{1f1e7}\u{1f1e9}",
            "be" => "\u{1f1e7}\u{1f1ea}",
            "bf" => "\u{1f1e7}\u{1f1eb}",
            "bg" => "\u{1f1e7}\u{1f1ec}",
            "bh" => "\u{1f1e7}\u{1f1ed}",
            "bi" => "\u{1f1e7}\u{1f1ee}",
            "bj" => "\u{1f1e7}\u{1f1ef}",
            "bl" => "\u{1f1e7}\u{1f1f1}",
            "bm" => "\u{1f1e7}\u{1f1f2}",
            "bn" => "\u{1f1e7}\u{1f1f3}",
            "bo" => "\u{1f1e7}\u{1f1f4}",
            "bq" => "\u{1f1e7}\u{1f1f6}",
            "br" => "\u{1f1e7}\u{1f1f7}",
            "bs" => "\u{1f1e7}\u{1f1f8}",
            "bt" => "\u{1f1e7}\u{1f1f9}",
            "bv" => "\u{1f1e7}\u{1f1fb}",
            "bw" => "\u{1f1e7}\u{1f1fc}",
            "by" => "\u{1f1e7}\u{1f1fe}",
            "bz" => "\u{1f1e7}\u{1f1ff}",
            "ca" => "\u{1f1e8}\u{1f1e6}",
            "cc" => "\u{1f1e8}\u{1f1e8}",
            "cd" => "\u{1f1e8}\u{1f1e9}",
            "cf" => "\u{1f1e8}\u{1f1eb}",
            "cg" => "\u{1f1e8}\u{1f1ec}",
            "ch" => "\u{1f1e8}\u{1f1ed}",
            "ci" => "\u{1f1e8}\u{1f1ee}",
            "ck" => "\u{1f1e8}\u{1f1f0}",
            "cl" => "\u{1f1e8}\u{1f1f1}",
            "cm" => "\u{1f1e8}\u{1f1f2}",
            "cn" => "\u{1f1e8}\u{1f1f3}",
            "co" => "\u{1f1e8}\u{1f1f4}",
            "cr" => "\u{1f1e8}\u{1f1f7}",
            "cu" => "\u{1f1e8}\u{1f1fa}",
            "cv" => "\u{1f1e8}\u{1f1fb}",
            "cw" => "\u{1f1e8}\u{1f1fc}",
            "cx" => "\u{1f1e8}\u{1f1fd}",
            "cy" => "\u{1f1e8}\u{1f1fe}",
            "cz" => "\u{1f1e8}\u{1f1ff}",
            "de" => "\u{1f1e9}\u{1f1ea}",
            "dg" => "\u{1f1e9}\u{1f1ec}",
            "dj" => "\u{1f1e9}\u{1f1ef}",
            "dk" => "\u{1f1e9}\u{1f1f0}",
            "dm" => "\u{1f1e9}\u{1f1f2}",
            "do" => "\u{1f1e9}\u{1f1f4}",
            "dz" => "\u{1f1e9}\u{1f1ff}",
            "ec" => "\u{1f1ea}\u{1f1e8}",
            "ee" => "\u{1f1ea}\u{1f1ea}",
            "eg" => "\u{1f1ea}\u{1f1ec}",
            "eh" => "\u{1f1ea}\u{1f1ed}",
            "er" => "\u{1f1ea}\u{1f1f7}",
            "es" => "\u{1f1ea}\u{1f1f8}",
            "et" => "\u{1f1ea}\u{1f1f9}",
            "fi" => "\u{1f1eb}\u{1f1ee}",
            "fj" => "\u{1f1eb}\u{1f1ef}",
            "fk" => "\u{1f1eb}\u{1f1f0}",
            "fm" => "\u{1f1eb}\u{1f1f2}",
            "fo" => "\u{1f1eb}\u{1f1f4}",
            "fr" => "\u{1f1eb}\u{1f1f7}",
            "ga" => "\u{1f1ec}\u{1f1e6}",
            "gb" => "\u{1f1ec}\u{1f1e7}",
            "gd" => "\u{1f1ec}\u{1f1e9}",
            "ge" => "\u{1f1ec}\u{1f1ea}",
            "gf" => "\u{1f1ec}\u{1f1eb}",
            "gg" => "\u{1f1ec}\u{1f1ec}",
            "gh" => "\u{1f1ec}\u{1f1ed}",
            "gi" => "\u{1f1ec}\u{1f1ee}",
            "gl" => "\u{1f1ec}\u{1f1f1}",
            "gm" => "\u{1f1ec}\u{1f1f2}",
            "gn" => "\u{1f1ec}\u{1f1f3}",
            "gp" => "\u{1f1ec}\u{1f1f5}",
            "gq" => "\u{1f1ec}\u{1f1f6}",
            "gr" => "\u{1f1ec}\u{1f1f7}",
            "gs" => "\u{1f1ec}\u{1f1f8}",
            "gt" => "\u{1f1ec}\u{1f1f9}",
            "gu" => "\u{1f1ec}\u{1f1fa}",
            "gw" => "\u{1f1ec}\u{1f1fc}",
            "gy" => "\u{1f1ec}\u{1f1fe}",
            "hk" => "\u{1f1ed}\u{1f1f0}",
            "hm" => "\u{1f1ed}\u{1f1f2}",
            "hn" => "\u{1f1ed}\u{1f1f3}",
            "hr" => "\u{1f1ed}\u{1f1f7}",
            "ht" => "\u{1f1ed}\u{1f1f9}",
            "hu" => "\u{1f1ed}\u{1f1fa}",
            "id" => "\u{1f1ee}\u{1f1e9}",
            "ie" => "\u{1f1ee}\u{1f1ea}",
            "il" => "\u{1f1ee}\u{1f1f1}",
            "im" => "\u{1f1ee}\u{1f1f2}",
            "in" => "\u{1f1ee}\u{1f1f3}",
            "io" => "\u{1f1ee}\u{1f1f4}",
            "iq" => "\u{1f1ee}\u{1f1f6}",
            "ir" => "\u{1f1ee}\u{1f1f7}",
            "is" => "\u{1f1ee}\u{1f1f8}",
            "it" => "\u{1f1ee}\u{1f1f9}",
            "je" => "\u{1f1ef}\u{1f1ea}",
            "jm" => "\u{1f1ef}\u{1f1f2}",
            "jo" => "\u{1f1ef}\u{1f1f4}",
            "jp" => "\u{1f1ef}\u{1f1f5}",
            "ke" => "\u{1f1f0}\u{1f1ea}",
            "kg" => "\u{1f1f0}\u{1f1ec}",
            "kh" => "\u{1f1f0}\u{1f1ed}",
            "ki" => "\u{1f1f0}\u{1f1ee}",
            "km" => "\u{1f1f0}\u{1f1f2}",
            "kn" => "\u{1f1f0}\u{1f1f3}",
            "kp" => "\u{1f1f0}\u{1f1f5}",
            "kr" => "\u{1f1f0}\u{1f1f7}",
            "kw" => "\u{1f1f0}\u{1f1fc}",
            "ky" => "\u{1f1f0}\u{1f1fe}",
            "kz" => "\u{1f1f0}\u{1f1ff}",
            "la" => "\u{1f1f1}\u{1f1e6}",
            "lb" => "\u{1f1f1}\u{1f1e7}",
            "lc" => "\u{1f1f1}\u{1f1e8}",
            "li" => "\u{1f1f1}\u{1f1ee}",
            "lk" => "\u{1f1f1}\u{1f1f0}",
            "lr" => "\u{1f1f1}\u{1f1f7}",
            "ls" => "\u{1f1f1}\u{1f1f8}",
            "lt" => "\u{1f1f1}\u{1f1f9}",
            "lu" => "\u{1f1f1}\u{1f1fa}",
            "lv" => "\u{1f1f1}\u{1f1fb}",
            "ly" => "\u{1f1f1}\u{1f1fe}",
            "ma" => "\u{1f1f2}\u{1f1e6}",
            "mc" => "\u{1f1f2}\u{1f1e8}",
            "md" => "\u{1f1f2}\u{1f1e9}",
            "me" => "\u{1f1f2}\u{1f1ea}",
            "mf" => "\u{1f1f2}\u{1f1eb}",
            "mg" => "\u{1f1f2}\u{1f1ec}",
            "mh" => "\u{1f1f2}\u{1f1ed}",
            "mk" => "\u{1f1f2}\u{1f1f0}",
            "ml" => "\u{1f1f2}\u{1f1f1}",
            "mm" => "\u{1f1f2}\u{1f1f2}",
            "mn" => "\u{1f1f2}\u{1f1f3}",
            "mo" => "\u{1f1f2}\u{1f1f4}",
            "mp" => "\u{1f1f2}\u{1f1f5}",
            "mq" => "\u{1f1f2}\u{1f1f6}",
            "mr" => "\u{1f1f2}\u{1f1f7}",
            "ms" => "\u{1f1f2}\u{1f1f8}",
            "mt" => "\u{1f1f2}\u{1f1f9}",
            "mu" => "\u{1f1f2}\u{1f1fa}",
            "mv" => "\u{1f1f2}\u{1f1fb}",
            "mw" => "\u{1f1f2}\u{1f1fc}",
            "mx" => "\u{1f1f2}\u{1f1fd}",
            "my" => "\u{1f1f2}\u{1f1fe}",
            "mz" => "\u{1f1f2}\u{1f1ff}",
            "na" => "\u{1f1f3}\u{1f1e6}",
            "nc" => "\u{1f1f3}\u{1f1e8}",
            "ne" => "\u{1f1f3}\u{1f1ea}",
            "nf" => "\u{1f1f3}\u{1f1eb}",
            "ng" => "\u{1f1f3}\u{1f1ec}",
            "ni" => "\u{1f1f3}\u{1f1ee}",
            "nl" => "\u{1f1f3}\u{1f1f1}",
            "no" => "\u{1f1f3}\u{1f1f4}",
            "np" => "\u{1f1f3}\u{1f1f5}",
            "nr" => "\u{1f1f3}\u{1f1f7}",
            "nu" => "\u{1f1f3}\u{1f1fa}",
            "nz" => "\u{1f1f3}\u{1f1ff}",
            "om" => "\u{1f1f4}\u{1f1f2}",
            "pa" => "\u{1f1f5}\u{1f1e6}",
            "pe" => "\u{1f1f5}\u{1f1ea}",
            "pf" => "\u{1f1f5}\u{1f1eb}",
            "pg" => "\u{1f1f5}\u{1f1ec}",
            "ph" => "\u{1f1f5}\u{1f1ed}",
            "pk" => "\u{1f1f5}\u{1f1f0}",
            "pl" => "\u{1f1f5}\u{1f1f1}",
            "pm" => "\u{1f1f5}\u{1f1f2}",
            "pn" => "\u{1f1f5}\u{1f1f3}",
            "pr" => "\u{1f1f5}\u{1f1f7}",
            "ps" => "\u{1f1f5}\u{1f1f8}",
            "pt" => "\u{1f1f5}\u{1f1f9}",
            "pw" => "\u{1f1f5}\u{1f1fc}",
            "py" => "\u{1f1f5}\u{1f1fe}",
            "qa" => "\u{1f1f6}\u{1f1e6}",
            "re" => "\u{1f1f7}\u{1f1ea}",
            "ro" => "\u{1f1f7}\u{1f1f4}",
            "rs" => "\u{1f1f7}\u{1f1f8}",
            "ru" => "\u{1f1f7}\u{1f1fa}",
            "rw" => "\u{1f1f7}\u{1f1fc}",
            "sa" => "\u{1f1f8}\u{1f1e6}",
            "sb" => "\u{1f1f8}\u{1f1e7}",
            "sc" => "\u{1f1f8}\u{1f1e8}",
            "sd" => "\u{1f1f8}\u{1f1e9}",
            "se" => "\u{1f1f8}\u{1f1ea}",
            "sg" => "\u{1f1f8}\u{1f1ec}",
            "sh" => "\u{1f1f8}\u{1f1ed}",
            "si" => "\u{1f1f8}\u{1f1ee}",
            "sj" => "\u{1f1f8}\u{1f1ef}",
            "sk" => "\u{1f1f8}\u{1f1f0}",
            "sl" => "\u{1f1f8}\u{1f1f1}",
            "sm" => "\u{1f1f8}\u{1f1f2}",
            "sn" => "\u{1f1f8}\u{1f1f3}",
            "so" => "\u{1f1f8}\u{1f1f4}",
            "sr" => "\u{1f1f8}\u{1f1f7}",
            "ss" => "\u{1f1f8}\u{1f1f8}",
            "st" => "\u{1f1f8}\u{1f1f9}",
            "sv" => "\u{1f1f8}\u{1f1fb}",
            "sx" => "\u{1f1f8}\u{1f1fd}",
            "sy" => "\u{1f1f8}\u{1f1fe}",
            "sz" => "\u{1f1f8}\u{1f1ff}",
            "tc" => "\u{1f1f9}\u{1f1e8}",
            "td" => "\u{1f1f9}\u{1f1e9}",
            "tf" => "\u{1f1f9}\u{1f1eb}",
            "tg" => "\u{1f1f9}\u{1f1ec}",
            "th" => "\u{1f1f9}\u{1f1ed}",
            "tj" => "\u{1f1f9}\u{1f1ef}",
            "tk" => "\u{1f1f9}\u{1f1f0}",
            "tl" => "\u{1f1f9}\u{1f1f1}",
            "tm" => "\u{1f1f9}\u{1f1f2}",
            "tn" => "\u{1f1f9}\u{1f1f3}",
            "to" => "\u{1f1f9}\u{1f1f4}",
            "tr" => "\u{1f1f9}\u{1f1f7}",
            "tt" => "\u{1f1f9}\u{1f1f9}",
            "tv" => "\u{1f1f9}\u{1f1fb}",
            "tw" => "\u{1f1f9}\u{1f1fc}",
            "tz" => "\u{1f1f9}\u{1f1ff}",
            "ua" => "\u{1f1fa}\u{1f1e6}",
            "ug" => "\u{1f1fa}\u{1f1ec}",
            "um" => "\u{1f1fa}\u{1f1f2}",
            "us" => "\u{1f1fa}\u{1f1f8}",
            "uy" => "\u{1f1fa}\u{1f1fe}",
            "uz" => "\u{1f1fa}\u{1f1ff}",
            "va" => "\u{1f1fb}\u{1f1e6}",
            "vc" => "\u{1f1fb}\u{1f1e8}",
            "ve" => "\u{1f1fb}\u{1f1ea}",
            "vg" => "\u{1f1fb}\u{1f1ec}",
            "vi" => "\u{1f1fb}\u{1f1ee}",
            "vn" => "\u{1f1fb}\u{1f1f3}",
            "vu" => "\u{1f1fb}\u{1f1fa}",
            "wf" => "\u{1f1fc}\u{1f1eb}",
            "ws" => "\u{1f1fc}\u{1f1f8}",
            "xk" => "\u{1f1fd}\u{1f1f0}",
            "ye" => "\u{1f1fe}\u{1f1ea}",
            "yt" => "\u{1f1fe}\u{1f1f9}",
            "za" => "\u{1f1ff}\u{1f1e6}",
            "zm" => "\u{1f1ff}\u{1f1f2}",
            "zw" => "\u{1f1ff}\u{1f1fc}",
            "ru-ba" => "🏴󠁲󠁵󠁢󠁡󠁿",
        ];
        // we calculate the plugin path part, so we can link the images there
        //$plugpath = parse_url($my_transposh_plugin->transposh_plugin_url, PHP_URL_PATH);

        echo "<div class=\"" . NO_TRANSLATE_CLASS . " transposh_flags\" >";
        foreach ($args as $langrecord) {
            echo "<a href=\"{$langrecord['url']}\"" . ($langrecord['active'] ? ' class="tr_active"' : '' ) . '>' .
            $emoji_flags[$langrecord['flag']] .
            "</a>";
        }
        echo "</div>";
    }
}
?>
