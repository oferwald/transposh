<?php

/*
  Plugin Name: Flags emoji
  Plugin URI: http://transposh.org/
  Description: Widget with emoji flags links
  Author: Team Transposh
  Version: 1.0
  Author URI: http://transposh.org/
  License: GPL (http://www.gnu.org/licenses/gpl.txt)
 */

/*
 * Transposh v%VERSION%
 * http://transposh.org/
 *
 * Copyright %YEAR%, Team Transposh
 * Licensed under the GPL Version 2 or higher.
 * http://transposh.org/license
 *
 * Date: %DATE%
 */

/**
 * This function allows the widget to tell the invoker if it needs to calculate different urls per language, here it is needed
 * @return boolean
 */
class tpw_flagsemoji extends transposh_base_widget
{

    /**
     * Creates the list of flags
     * @param array $args - http://trac.transposh.org/wiki/WidgetWritingGuide#functiontp_widgets_doargs
     * @global transposh_plugin $my_transposh_plugin
     */
    static function tp_widget_do($args)
    {
        global $my_transposh_plugin;

        // An array to hold all the country flags as emojis
        $emoji_flags = [
            'ad' => 'ðŸ‡¦ðŸ‡©', 'ae' => 'ðŸ‡¦ðŸ‡ª', 'af' => 'ðŸ‡¦ðŸ‡«', 'ag' => 'ðŸ‡¦ðŸ‡¬', 'ai' => 'ðŸ‡¦ðŸ‡®', 'al' => 'ðŸ‡¦ðŸ‡±', 'am' => 'ðŸ‡¦ðŸ‡²', 'ao' => 'ðŸ‡¦ðŸ‡´', 'aq' => 'ðŸ‡¦ðŸ‡¶', 'ar' => 'ðŸ‡¦ðŸ‡·',
            'as' => 'ðŸ‡¦ðŸ‡¸', 'at' => 'ðŸ‡¦ðŸ‡¹', 'au' => 'ðŸ‡¦ðŸ‡º', 'aw' => 'ðŸ‡¦ðŸ‡¼', 'ax' => 'ðŸ‡¦ðŸ‡½', 'az' => 'ðŸ‡¦ðŸ‡¿', 'ba' => 'ðŸ‡§ðŸ‡¦', 'bb' => 'ðŸ‡§ðŸ‡§', 'bd' => 'ðŸ‡§ðŸ‡©', 'be' => 'ðŸ‡§ðŸ‡ª',
            'bf' => 'ðŸ‡§ðŸ‡«', 'bg' => 'ðŸ‡§ðŸ‡¬', 'bh' => 'ðŸ‡§ðŸ‡­', 'bi' => 'ðŸ‡§ðŸ‡®', 'bj' => 'ðŸ‡§ðŸ‡¯', 'bl' => 'ðŸ‡§ðŸ‡±', 'bm' => 'ðŸ‡§ðŸ‡²', 'bn' => 'ðŸ‡§ðŸ‡³', 'bo' => 'ðŸ‡§ðŸ‡´', 'bq' => 'ðŸ‡§ðŸ‡¶',
            'br' => 'ðŸ‡§ðŸ‡·', 'bs' => 'ðŸ‡§ðŸ‡¸', 'bt' => 'ðŸ‡§ðŸ‡¹', 'bv' => 'ðŸ‡§ðŸ‡»', 'bw' => 'ðŸ‡§ðŸ‡¼', 'by' => 'ðŸ‡§ðŸ‡¾', 'bz' => 'ðŸ‡§ðŸ‡¿', 'ca' => 'ðŸ‡¨ðŸ‡¦', 'cc' => 'ðŸ‡¨ðŸ‡¨', 'cd' => 'ðŸ‡¨ðŸ‡©',
            'cf' => 'ðŸ‡¨ðŸ‡«', 'cg' => 'ðŸ‡¨ðŸ‡¬', 'ch' => 'ðŸ‡¨ðŸ‡­', 'ci' => 'ðŸ‡¨ðŸ‡®', 'ck' => 'ðŸ‡¨ðŸ‡°', 'cl' => 'ðŸ‡¨ðŸ‡±', 'cm' => 'ðŸ‡¨ðŸ‡²', 'cn' => 'ðŸ‡¨ðŸ‡³', 'co' => 'ðŸ‡¨ðŸ‡´', 'cr' => 'ðŸ‡¨ðŸ‡·',
            'cu' => 'ðŸ‡¨ðŸ‡º', 'cv' => 'ðŸ‡¨ðŸ‡»', 'cw' => 'ðŸ‡¨ðŸ‡¼', 'cx' => 'ðŸ‡¨ðŸ‡½', 'cy' => 'ðŸ‡¨ðŸ‡¾', 'cz' => 'ðŸ‡¨ðŸ‡¿', 'de' => 'ðŸ‡©ðŸ‡ª', 'dg' => 'ðŸ‡©ðŸ‡¬', 'dj' => 'ðŸ‡©ðŸ‡¯', 'dk' => 'ðŸ‡©ðŸ‡°',
            'dm' => 'ðŸ‡©ðŸ‡²', 'do' => 'ðŸ‡©ðŸ‡´', 'dz' => 'ðŸ‡©ðŸ‡¿', 'ec' => 'ðŸ‡ªðŸ‡¨', 'ee' => 'ðŸ‡ªðŸ‡ª', 'eg' => 'ðŸ‡ªðŸ‡¬', 'eh' => 'ðŸ‡ªðŸ‡­', 'er' => 'ðŸ‡ªðŸ‡·', 'es' => 'ðŸ‡ªðŸ‡¸', 'et' => 'ðŸ‡ªðŸ‡¹',
            'fi' => 'ðŸ‡«ðŸ‡®', 'fj' => 'ðŸ‡«ðŸ‡¯', 'fk' => 'ðŸ‡«ðŸ‡°', 'fm' => 'ðŸ‡«ðŸ‡²', 'fo' => 'ðŸ‡«ðŸ‡´', 'fr' => 'ðŸ‡«ðŸ‡·', 'ga' => 'ðŸ‡¬ðŸ‡¦', 'gb' => 'ðŸ‡¬ðŸ‡§', 'gd' => 'ðŸ‡¬ðŸ‡©', 'ge' => 'ðŸ‡¬ðŸ‡ª',
            'gf' => 'ðŸ‡¬ðŸ‡«', 'gg' => 'ðŸ‡¬ðŸ‡¬', 'gh' => 'ðŸ‡¬ðŸ‡­', 'gi' => 'ðŸ‡¬ðŸ‡®', 'gl' => 'ðŸ‡¬ðŸ‡±', 'gm' => 'ðŸ‡¬ðŸ‡²', 'gn' => 'ðŸ‡¬ðŸ‡³', 'gp' => 'ðŸ‡¬ðŸ‡µ', 'gq' => 'ðŸ‡¬ðŸ‡¶', 'gr' => 'ðŸ‡¬ðŸ‡·',
            'gs' => 'ðŸ‡¬ðŸ‡¸', 'gt' => 'ðŸ‡¬ðŸ‡¹', 'gu' => 'ðŸ‡¬ðŸ‡º', 'gw' => 'ðŸ‡¬ðŸ‡¼', 'gy' => 'ðŸ‡¬ðŸ‡¾', 'hk' => 'ðŸ‡­ðŸ‡°', 'hm' => 'ðŸ‡­ðŸ‡²', 'hn' => 'ðŸ‡­ðŸ‡³', 'hr' => 'ðŸ‡­ðŸ‡·', 'ht' => 'ðŸ‡­ðŸ‡¹',
            'hu' => 'ðŸ‡­ðŸ‡º', 'id' => 'ðŸ‡®ðŸ‡©', 'ie' => 'ðŸ‡®ðŸ‡ª', 'il' => 'ðŸ‡®ðŸ‡±', 'im' => 'ðŸ‡®ðŸ‡²', 'in' => 'ðŸ‡®ðŸ‡³', 'io' => 'ðŸ‡®ðŸ‡´', 'iq' => 'ðŸ‡®ðŸ‡¶', 'ir' => 'ðŸ‡®ðŸ‡·', 'is' => 'ðŸ‡®ðŸ‡¸',
            'it' => 'ðŸ‡®ðŸ‡¹', 'je' => 'ðŸ‡¯ðŸ‡ª', 'jm' => 'ðŸ‡¯ðŸ‡²', 'jo' => 'ðŸ‡¯ðŸ‡´', 'jp' => 'ðŸ‡¯ðŸ‡µ', 'ke' => 'ðŸ‡°ðŸ‡ª', 'kg' => 'ðŸ‡°ðŸ‡¬', 'kh' => 'ðŸ‡°ðŸ‡­', 'ki' => 'ðŸ‡°ðŸ‡®', 'km' => 'ðŸ‡°ðŸ‡²',
            'kn' => 'ðŸ‡°ðŸ‡³', 'kp' => 'ðŸ‡°ðŸ‡µ', 'kr' => 'ðŸ‡°ðŸ‡·', 'kw' => 'ðŸ‡°ðŸ‡¼', 'ky' => 'ðŸ‡°ðŸ‡¾', 'kz' => 'ðŸ‡°ðŸ‡¿', 'la' => 'ðŸ‡±ðŸ‡¦', 'lb' => 'ðŸ‡±ðŸ‡§', 'lc' => 'ðŸ‡±ðŸ‡¨', 'li' => 'ðŸ‡±ðŸ‡®',
            'lk' => 'ðŸ‡±ðŸ‡°', 'lr' => 'ðŸ‡±ðŸ‡·', 'ls' => 'ðŸ‡±ðŸ‡¸', 'lt' => 'ðŸ‡±ðŸ‡¹', 'lu' => 'ðŸ‡±ðŸ‡º', 'lv' => 'ðŸ‡±ðŸ‡»', 'ly' => 'ðŸ‡±ðŸ‡¾', 'ma' => 'ðŸ‡²ðŸ‡¦', 'mc' => 'ðŸ‡²ðŸ‡¨', 'md' => 'ðŸ‡²ðŸ‡©',
            'me' => 'ðŸ‡²ðŸ‡ª', 'mf' => 'ðŸ‡²ðŸ‡«', 'mg' => 'ðŸ‡²ðŸ‡¬', 'mh' => 'ðŸ‡²ðŸ‡­', 'mk' => 'ðŸ‡²ðŸ‡°', 'ml' => 'ðŸ‡²ðŸ‡±', 'mm' => 'ðŸ‡²ðŸ‡²', 'mn' => 'ðŸ‡²ðŸ‡³', 'mo' => 'ðŸ‡²ðŸ‡´', 'mp' => 'ðŸ‡²ðŸ‡µ',
            'mq' => 'ðŸ‡²ðŸ‡¶', 'mr' => 'ðŸ‡²ðŸ‡·', 'ms' => 'ðŸ‡²ðŸ‡¸', 'mt' => 'ðŸ‡²ðŸ‡¹', 'mu' => 'ðŸ‡²ðŸ‡º', 'mv' => 'ðŸ‡²ðŸ‡»', 'mw' => 'ðŸ‡²ðŸ‡¼', 'mx' => 'ðŸ‡²ðŸ‡½', 'my' => 'ðŸ‡²ðŸ‡¾', 'mz' => 'ðŸ‡²ðŸ‡¿',
            'na' => 'ðŸ‡³ðŸ‡¦', 'nc' => 'ðŸ‡³ðŸ‡¨', 'ne' => 'ðŸ‡³ðŸ‡ª', 'nf' => 'ðŸ‡³ðŸ‡«', 'ng' => 'ðŸ‡³ðŸ‡¬', 'ni' => 'ðŸ‡³ðŸ‡®', 'nl' => 'ðŸ‡³ðŸ‡±', 'no' => 'ðŸ‡³ðŸ‡´', 'np' => 'ðŸ‡³ðŸ‡µ', 'nr' => 'ðŸ‡³ðŸ‡·',
            'nu' => 'ðŸ‡³ðŸ‡º', 'nz' => 'ðŸ‡³ðŸ‡¿', 'om' => 'ðŸ‡´ðŸ‡²', 'pa' => 'ðŸ‡µðŸ‡¦', 'pe' => 'ðŸ‡µðŸ‡ª', 'pf' => 'ðŸ‡µðŸ‡«', 'pg' => 'ðŸ‡µðŸ‡¬', 'ph' => 'ðŸ‡µðŸ‡­', 'pk' => 'ðŸ‡µðŸ‡°', 'pl' => 'ðŸ‡µðŸ‡±',
            'pm' => 'ðŸ‡µðŸ‡²', 'pn' => 'ðŸ‡µðŸ‡³', 'pr' => 'ðŸ‡µðŸ‡·', 'ps' => 'ðŸ‡µðŸ‡¸', 'pt' => 'ðŸ‡µðŸ‡¹', 'pw' => 'ðŸ‡µðŸ‡¼', 'py' => 'ðŸ‡µðŸ‡¾', 'qa' => 'ðŸ‡¶ðŸ‡¦', 're' => 'ðŸ‡·ðŸ‡ª', 'ro' => 'ðŸ‡·ðŸ‡´',
            'rs' => 'ðŸ‡·ðŸ‡¸', 'ru' => 'ðŸ‡·ðŸ‡º', 'rw' => 'ðŸ‡·ðŸ‡¼', 'sa' => 'ðŸ‡¸ðŸ‡¦', 'sb' => 'ðŸ‡¸ðŸ‡§', 'sc' => 'ðŸ‡¸ðŸ‡¨', 'sd' => 'ðŸ‡¸ðŸ‡©', 'se' => 'ðŸ‡¸ðŸ‡ª', 'sg' => 'ðŸ‡¸ðŸ‡¬', 'sh' => 'ðŸ‡¸ðŸ‡­',
            'si' => 'ðŸ‡¸ðŸ‡®', 'sj' => 'ðŸ‡¸ðŸ‡¯', 'sk' => 'ðŸ‡¸ðŸ‡°', 'sl' => 'ðŸ‡¸ðŸ‡±', 'sm' => 'ðŸ‡¸ðŸ‡²', 'sn' => 'ðŸ‡¸ðŸ‡³', 'so' => 'ðŸ‡¸ðŸ‡´', 'sr' => 'ðŸ‡¸ðŸ‡·', 'ss' => 'ðŸ‡¸ðŸ‡¸', 'st' => 'ðŸ‡¸ðŸ‡¹',
            'sv' => 'ðŸ‡¸ðŸ‡»', 'sx' => 'ðŸ‡¸ðŸ‡½', 'sy' => 'ðŸ‡¸ðŸ‡¾', 'sz' => 'ðŸ‡¸ðŸ‡¿', 'tc' => 'ðŸ‡¹ðŸ‡¨', 'td' => 'ðŸ‡¹ðŸ‡©', 'tf' => 'ðŸ‡¹ðŸ‡«', 'tg' => 'ðŸ‡¹ðŸ‡¬', 'th' => 'ðŸ‡¹ðŸ‡­', 'tj' => 'ðŸ‡¹ðŸ‡¯',
            'tk' => 'ðŸ‡¹ðŸ‡°', 'tl' => 'ðŸ‡¹ðŸ‡±', 'tm' => 'ðŸ‡¹ðŸ‡²', 'tn' => 'ðŸ‡¹ðŸ‡³', 'to' => 'ðŸ‡¹ðŸ‡´', 'tr' => 'ðŸ‡¹ðŸ‡·', 'tt' => 'ðŸ‡¹ðŸ‡¹', 'tv' => 'ðŸ‡¹ðŸ‡»', 'tw' => 'ðŸ‡¹ðŸ‡¼', 'tz' => 'ðŸ‡¹ðŸ‡¿',
            'ua' => 'ðŸ‡ºðŸ‡¦', 'ug' => 'ðŸ‡ºðŸ‡¬', 'um' => 'ðŸ‡ºðŸ‡²', 'us' => 'ðŸ‡ºðŸ‡¸', 'uy' => 'ðŸ‡ºðŸ‡¾', 'uz' => 'ðŸ‡ºðŸ‡¿', 'va' => 'ðŸ‡»ðŸ‡¦', 'vc' => 'ðŸ‡»ðŸ‡¨', 've' => 'ðŸ‡»ðŸ‡ª', 'vg' => 'ðŸ‡»ðŸ‡¬',
            'vi' => 'ðŸ‡»ðŸ‡®', 'vn' => 'ðŸ‡»ðŸ‡³', 'vu' => 'ðŸ‡»ðŸ‡º', 'wf' => 'ðŸ‡¼ðŸ‡«', 'ws' => 'ðŸ‡¼ðŸ‡¸', 'xk' => 'ðŸ‡½ðŸ‡°', 'ye' => 'ðŸ‡¾ðŸ‡ª', 'yt' => 'ðŸ‡¾ðŸ‡¹', 'za' => 'ðŸ‡¿ðŸ‡¦', 'zm' => 'ðŸ‡¿ðŸ‡²',
            'zw' => 'ðŸ‡¿ðŸ‡¼', 'eu' => 'ðŸ‡ªðŸ‡º', 'es-ca' => 'ðŸ´ó ¥ó ³ó £ó ´ó ¿', 'ru-ba' => 'ðŸ´ó ²ó µó ¢ó ¡ó ¿', 'unknown' => 'ðŸ‡ºðŸ‡³',
        ];

        // Just put the widget out there
        echo "<div class=\"" . NO_TRANSLATE_CLASS . " transposh_flags\" >";
        foreach ($args as $langrecord) {
            echo "<a title=\"{$langrecord['langorig']}\" href=\"{$langrecord['url']}\"" . ($langrecord['active'] ? ' class="tr_active"' : '') . '>';
            if (isset($emoji_flags[$langrecord['flag']])) {
                echo $emoji_flags[$langrecord['flag']];
            } else {
                echo $emoji_flags['unknown'];
            }
            echo "</a>";
        }
        echo "</div>";
    }
}

?>
